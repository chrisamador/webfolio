require.config({waitSeconds:30,paths:{backbone:"libs/backbone",jquery:"libs/jquery",underscore:"libs/underscore",scrollView:"module/scrollView",domReady:"module/domready",rqPageContent:"module/rqPageContent",utls:"module/utls",sls:"module/simplels"}}),require(["backbone","init","page","domReady","rqPageContent","scrollView","utls","sls"],function(e,t,n,a,i,o,r,l){a(function(){t(),n()});var s={Stage:{},View:{},Router:{}};s.View.SiteBody=e.View.extend({el:document.body,events:{"click a":"anchorClick"},initialize:function(){this.updateSiteMeta()},anchorClick:function(e){var t=e.currentTarget.href,n=function(e){var t=function(e){return e.replace("http://","").replace("https://","").split("/")[0]};return t(location.href)!==t(e)},a=function(e){var t=e.replace("http://","").replace("https://","").indexOf("/");return(e.replace("http://","").replace("https://","").substr(t)+"/").replace("//","/")};if(n(t));else{e.preventDefault();var i=a(t),o=$(e.currentTarget);o.hasClass("single-work__link")?this.workPageChange(o,i):this.pageChange(i)}},updateSiteMeta:function(){var e=$("#page-title").attr("data-page-title"),t=$(".nav-links"),n=document.location.pathname;$("title").text(e+"Chris Amador </> Creative Front-End Developer"),t.find(".active").removeClass("active"),t.each(function(e,t){var a=$(t).find("a");a.each(function(e,t){0===n.indexOf(t.pathname+"/")?$(t).parent().addClass("active"):$(t).parent().addClass("non-active")})})},pageChange:function(t){e.history.navigate(t,{trigger:!0})},workPageChange:function(t,n){var a=this,i=this.$el,o=t.offset().top-$(window).scrollTop(),r=t.offset().left,s=$(window).width()-(r+t.outerWidth()),d=t.clone();d.css({position:"fixed",zIndex:9,left:r+"px",top:o+"px",right:s+"px"}).addClass("single-work__link--full-page"),i.append(d),d.animate({left:0,right:0,bottom:0,top:0},600,function(){l.add(),a.el.scrollTop=0,e.history.navigate(n,{trigger:!0})})},renderNewContent:function(e){var t=this;t.$el.find(".page--active").removeClass("page--active").addClass("page--old");var a=function(){r(document.getElementById("mobile-btn")).removeClass("is-active"),r(document.getElementById("side-nav")).removeClass("is-active"),t.$el.find("#header").after((new s.View.PageContent).render(e).el),setTimeout(function(){t.$el.find(".page--incoming").css("left","0%"),t.updateSiteMeta()},100),setTimeout(function(){t.$el.find(".page--incoming").addClass("page--active").removeClass("page--incoming"),t.el.scrollTop=0,t.$el.find(".page--old").remove(),t.$el.find(".single-work__link--full-page").remove(),setTimeout(function(){s.Stage.Trans=!1,n(),o(),l.remove()},100)},1100)};return a(),this}}),s.View.PageContent=e.View.extend({className:"page page--incoming",render:function(e){return this.$el.html(e),this}}),s.Router.Main=e.Router.extend({initialize:function(){},routes:{"":"home",":pageName/":"page","works/:workName/":"work"},loader:function(e){s.Stage.InitLoad?s.Stage.InitLoad=!1:(s.Stage.Trans=!0,i(e,function(e,t){e||s.Stage.SiteBody.renderNewContent(t)}))},home:function(){this.loader("")},page:function(e){this.loader(e+"/")},work:function(e){this.loader("works/"+e+"/")}}),_.extend(s.Stage,e.Events),s.Stage.InitLoad=!0,s.Stage.Trans=!1,s.Stage.SiteBody=new s.View.SiteBody,s.Stage.Router=new s.Router.Main,e.history.start({pushState:!0}),window.STAGE=s.Stage});