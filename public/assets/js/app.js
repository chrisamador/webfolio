require.config({waitSeconds:30,paths:{backbone:"libs/backbone",jquery:"libs/jquery",underscore:"libs/underscore",scrollView:"module/scrollView",domReady:"module/domready",rqPageContent:"module/rqPageContent",utls:"module/utls",sls:"module/simplels"}}),require(["backbone","init","page","domReady","rqPageContent","scrollView","utls","sls"],function(e,t,a,n,i,o,r,s){n(function(){t(),a()});var l={Stage:{},View:{},Router:{}};l.View.SiteBody=e.View.extend({el:document.body,events:{"click a":"anchorClick"},initialize:function(){this.updateSiteMeta()},anchorClick:function(e){var t=e.currentTarget.href,a=function(e){var t=function(e){return e.replace("http://","").replace("https://","").split("/")[0]};return t(location.href)!==t(e)},n=function(e){var t=e.replace("http://","").replace("https://","").indexOf("/");return(e.replace("http://","").replace("https://","").substr(t)+"/").replace("//","/")};if(a(t));else{e.preventDefault();var i=n(t),o=$(e.currentTarget);o.hasClass("single-work__link")?this.workPageChange(o,i):this.pageChange(i)}},updateSiteMeta:function(){var e=$("#page-meta").attr("data-page-title"),t=$("#page-meta").attr("data-page-class"),a=$(".nav-links"),n=document.location.pathname;$("title").text(e+"Chris Amador </> Creative Front-End Developer"),a.find(".active").removeClass("active"),a.each(function(e,t){var a=$(t).find("a");a.each(function(e,t){0===n.indexOf(t.pathname+"/")?$(t).parent().addClass("active"):$(t).parent().addClass("non-active")})}),$("#body").removeClass(function(e,t){return(t.match(/(^|\s)page-\S+/g)||[]).join(" ")}).addClass("page-"+t)},pageChange:function(t){e.history.navigate(t,{trigger:!0})},workPageChange:function(t,a){var n=this,i=this.$el,o=t.offset().top-$(window).scrollTop(),r=t.offset().left,l=$(window).width()-(r+t.outerWidth()),d=t.clone();d.css({position:"fixed",zIndex:9,left:r+"px",top:o+"px",right:l+"px"}).addClass("single-work__link--full-page"),i.append(d),d.animate({left:0,right:0,bottom:0,top:0},600,function(){s.add(),n.el.scrollTop=0,e.history.navigate(a,{trigger:!0})})},renderNewContent:function(e){var t=this;t.$el.find(".page--active").removeClass("page--active").addClass("page--old");var n=function(){r(document.getElementById("mobile-btn")).removeClass("is-active"),r(document.getElementById("side-nav")).removeClass("is-active"),t.$el.find("#header").after((new l.View.PageContent).render(e).el),setTimeout(function(){t.$el.find(".page--incoming").css("left","0%"),t.updateSiteMeta()},100),setTimeout(function(){t.$el.find(".page--incoming").addClass("page--active").removeClass("page--incoming"),t.el.scrollTop=0,t.$el.find(".page--old").remove(),t.$el.find(".single-work__link--full-page").remove(),setTimeout(function(){l.Stage.Trans=!1,a(),o(),s.remove()},100)},1100)};return n(),this}}),l.View.PageContent=e.View.extend({className:"page page--incoming",render:function(e){return this.$el.html(e),this}}),l.Router.Main=e.Router.extend({initialize:function(){},routes:{"":"home",":pageName/":"page","works/:workName/":"work"},loader:function(e){l.Stage.InitLoad?l.Stage.InitLoad=!1:(l.Stage.Trans=!0,i(e,function(e,t){e||l.Stage.SiteBody.renderNewContent(t)}))},home:function(){this.loader("")},page:function(e){this.loader(e+"/")},work:function(e){this.loader("works/"+e+"/")}}),_.extend(l.Stage,e.Events),l.Stage.InitLoad=!0,l.Stage.Trans=!1,l.Stage.SiteBody=new l.View.SiteBody,l.Stage.Router=new l.Router.Main,e.history.start({pushState:!0}),window.STAGE=l.Stage});