define(["jquery"],function(n){var o={moving:!1,jsScrolling:!1,running:!0,breakPoints:{top:0,bottom:0},lastScrollTop:0,currentPosition:-1,initLoad:!0,$sections:[]},t=n("#pager"),i=function(){t.empty(),1!=o.$sections.length&&(o.$sections.each(function(o,i){var e=n(i).attr("data-name");t.append('<li data-index ="'+o+'"> <span>'+e+"</span> </li>")}),t.on("click",e),a())},e=function(t){var i;if(console.log(t),!o.jsScrolling){i="SPAN"==t.target.tagName?n(t.target).parent():n(t.target);var e=parseInt(i.attr("data-index"));o.jsScrolling=!0,c(o.$sections.eq(e))}},a=function(){var n=o.currentPosition;t.find(".active").removeClass("active"),t.find("li").eq(n).addClass("active")},s=function(){return o.$sections.eq(o.currentPosition)},c=function(t){o.moving=!0,n("html, body").animate({scrollTop:t.offset().top},500,"swing",function(){o.jsScrolling=!1,o.moving=!1})},l=function(n){console.log("sectionUpdate");var t,i=s();r(),t=s(),(i.attr("data-index")!==t.attr("data-index")||o.initLoad)&&(console.log("new section found"),o.initLoad=!1,i.removeClass("in-view"),t.addClass("in-view").addClass("view-loaded"),o.moving||o.jsScrolling||c(t),a())},r=function(){var t=Math.floor(window.innerHeight/3),i=n(window).scrollTop();o.$sections.each(function(n,e){e.offsetTop-t<=i&&e.offsetTop+e.offsetHeight-t>i&&(o.currentPosition=n)})},d=function(n){console.log("scrolling..."),o.moving&&n.preventDefault(),l()};console.log("beep boop scroll config"),n(window).on("scroll mousewheel touchMove",d);var f=function(){window.fullpage=o,o.$sections=n(".page-section__block"),o.$sections.each(function(n,o){o.dataset.index=n}),l(),i()},g=function(){o.initLoad=!0,f()};return{run:g}});